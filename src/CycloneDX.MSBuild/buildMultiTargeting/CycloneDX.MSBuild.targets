<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!--
    CycloneDX.MSBuild Multi-Targeting Targets

    This file is imported when building projects with multiple target frameworks.
    For multi-targeting projects, we only want to generate the SBOM once (not per framework).

    The SBOM generation is deferred to the outer build that coordinates all inner builds.
    However, we still need to import the targets for inner builds so that publish/pack
    operations can copy the already-generated SBOM.
  -->

  <!-- Disable per-framework SBOM generation for inner builds -->
  <PropertyGroup Condition="'$(TargetFramework)' != ''">
    <!-- Inner build: Don't generate SBOM (already generated by outer build) -->
    <_CycloneDxIsInnerBuild>true</_CycloneDxIsInnerBuild>
    <GenerateCycloneDxSbom>false</GenerateCycloneDxSbom>
  </PropertyGroup>

  <!-- Import standard targets for both outer and inner builds -->
  <!-- Inner builds need access to publish/pack targets to copy the SBOM -->
  <Import Project="..\build\CycloneDX.MSBuild.targets" />

</Project>
